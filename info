
Argo cd installation
helm install argocd argo/argo-cd -n argocd --create-namespace

---
phase 3 
--- 
metric server
kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
issue - Readiness probe failed: HTTP probe failed with statuscode: 500
fix:
kubectl patch deployment metrics-server -n kube-system --type='json' -p='[
  {
    "op": "add",
    "path": "/spec/template/spec/containers/0/args/-",
    "value": "--kubelet-insecure-tls"
  }
]'
kubectl rollout status deployment/metrics-server -n kube-system
kubectl get pods -n kube-system | grep metrics

---
giving load to check hpa
kubectl run -i --tty load-generator --rm --image=busybox -n dev -- /bin/sh

---
PHASE 4

We will install:
Prometheus
Grafana
via kube-prometheus-stack Helm chart

helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update
helm install monitoring prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  --create-namespace
grafana pasword
  kubectl --namespace monitoring get secrets monitoring-grafana -o jsonpath="{.data.admin-password}" | base64 -d ; echo


---

stop cluster
docker stop $(docker ps -q --filter "label=io.x-k8s.kind.cluster=<cluster-name>")
or
docker stop $(docker ps -q --filter "label=io.x-k8s.kind.cluster")

